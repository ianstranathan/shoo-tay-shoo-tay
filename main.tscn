[gd_scene load_steps=15 format=3 uid="uid://cnjs673hgk6wm"]

[ext_resource type="PackedScene" uid="uid://c2eah12q8mrq" path="res://player/player.tscn" id="1_ig7tw"]
[ext_resource type="Script" uid="uid://bgodmmno8hffy" path="res://main.gd" id="1_lquwl"]
[ext_resource type="PackedScene" uid="uid://dj0ps4y0nxcjp" path="res://levels/level0.tscn" id="2_7mycd"]
[ext_resource type="Script" uid="uid://dbx6y30r5vrjs" path="res://camera/cam.gd" id="4_1bvp3"]
[ext_resource type="Script" uid="uid://b717816mvrhfr" path="res://camera/follow_rig.gd" id="4_4c57u"]
[ext_resource type="Script" uid="uid://dgk6ocqcbjwkr" path="res://camera/shake_pivot.gd" id="5_efxa6"]
[ext_resource type="Script" uid="uid://cj5le4ngvuhl6" path="res://shootay_manager.gd" id="6_7mycd"]
[ext_resource type="Script" uid="uid://c24o054px4d8u" path="res://vfx_container.gd" id="7_272bh"]
[ext_resource type="PackedScene" uid="uid://cj4e05skrr1ug" path="res://enemies/enemy_manager/enemy_manager.tscn" id="7_kek77"]
[ext_resource type="Shader" uid="uid://c665h87g6h08y" path="res://post_processing/shockwave.gdshader" id="10_4c57u"]
[ext_resource type="Script" uid="uid://bnfbldgjulexf" path="res://post_processing_layer.gd" id="10_efxa6"]
[ext_resource type="PackedScene" uid="uid://dwcba7qkw7dhb" path="res://input_manager/input_manager.tscn" id="12_dg77c"]
[ext_resource type="PackedScene" uid="uid://brbsqoshfpptq" path="res://enemies/mob.tscn" id="13_ycdy4"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_efxa6"]
shader = ExtResource("10_4c57u")
shader_parameter/t = 0.1
shader_parameter/offset = Vector2(0, 0)

[node name="Main" type="Node" node_paths=PackedStringArray("the_player", "level", "the_shootay_manager", "cam_ref")]
script = ExtResource("1_lquwl")
the_player = NodePath("Player")
level = NodePath("Level")
the_shootay_manager = NodePath("ShootayManager")
cam_ref = NodePath("FollowRig/ShakePivot/Camera2D")

[node name="Level" parent="." instance=ExtResource("2_7mycd")]

[node name="Player" parent="." node_paths=PackedStringArray("input_manager") instance=ExtResource("1_ig7tw")]
input_manager = NodePath("../InputManager")

[node name="FollowRig" type="Node2D" parent="." node_paths=PackedStringArray("target")]
script = ExtResource("4_4c57u")
target = NodePath("../Player")

[node name="ShakePivot" type="Node2D" parent="FollowRig"]
script = ExtResource("5_efxa6")

[node name="ShootShakeTimer" type="Timer" parent="FollowRig/ShakePivot"]
wait_time = 0.2
one_shot = true

[node name="Camera2D" type="Camera2D" parent="FollowRig/ShakePivot"]
script = ExtResource("4_1bvp3")

[node name="ShootayManager" type="Node2D" parent="."]
script = ExtResource("6_7mycd")

[node name="vfx_container" type="Node2D" parent="."]
script = ExtResource("7_272bh")

[node name="EnemyManager" parent="." instance=ExtResource("7_kek77")]

[node name="PostProcessing" type="CanvasLayer" parent="." node_paths=PackedStringArray("cam")]
script = ExtResource("10_efxa6")
cam = NodePath("../FollowRig/ShakePivot/Camera2D")

[node name="ColorRect" type="ColorRect" parent="PostProcessing"]
visible = false
material = SubResource("ShaderMaterial_efxa6")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
pivot_offset = Vector2(-5428, 278)

[node name="InputManager" parent="." instance=ExtResource("12_dg77c")]

[node name="Mob" parent="." instance=ExtResource("13_ycdy4")]
position = Vector2(-339, -163)
